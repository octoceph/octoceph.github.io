<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Octo Dashboard</title>

<!-- Font Awesome для иконок (CDN) -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha512-pbJ6f+..." crossorigin="anonymous" referrerpolicy="no-referrer" />

<style>
  /* Общие переменные — HOLOGRAPHIC стиль */
  :root{
    --bg:#071026;
    --glass: rgba(255,255,255,0.06);
    --accent1: 125,200,255;   /* как rgb(...) */
    --accent2: 200,120,255;
    --panel-radius: 14px;
    --glass-border: rgba(255,255,255,0.06);
    --neon: 0 0 24px rgba(125,200,255,0.12), inset 0 0 30px rgba(125,200,255,0.02);
    --glass-blur: 10px;
    --font-sans: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    --left-width: 260px;
    --header-h: 64px;
    --footer-h: 48px;

    --panel-bg: #0e1624;
    --glass: rgba(255,255,255,0.03);
    --muted: rgba(255,255,255,0.55);
    --accent: #10a37f;
    --user-grad: linear-gradient(90deg,#2b6ef6,#6b8dfb);
    --radius: 10px;
  }

  /* Убираем веб-скроллбар (как просили) */
  ::-webkit-scrollbar { width: 0px; height: 0px; }

  html,body{
    font-family: monospace, "Courier New", monospace; /* моноширинный основной шрифт */
    color:#e6f6ff;height:100%; margin:0; padding:0;
    background: radial-gradient(1200px 600px at 10% 10%, rgba(125,200,255,0.04), transparent),
                radial-gradient(900px 400px at 90% 90%, rgba(200,120,255,0.03), transparent),
                var(--bg);
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    overflow: hidden;
  }

  /* Фиксированное левое меню */
  .left {
    position: fixed;
    left: 0; top: 0;
    width: var(--left-width);
    height: 100%;
    padding: 18px;
    box-sizing: border-box;
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-right: 1px solid var(--glass-border);
    backdrop-filter: blur(var(--glass-blur));
    display:flex;
    flex-direction:column;
    gap:14px;
  }

  .logo {
    display:flex;
    gap:10px;
    align-items:center;
  }
  .logo img { height:60px; width:auto; filter: drop-shadow(0 2px 8px rgba(125,200,255,0.06)); }
  .logo strong { font-size:18.85px; line-height:1; /*color:rgb(var(--accent1));*/ }
  .muted { color: rgba(230,246,255,0.6); font-size:12px; }

  /* Меню-элементы */
  .menu { margin-top:8px; display:flex; flex-direction:column; gap:8px; }
   button#btnSend, .menu button, .btn send{
    display:flex; align-items:center; gap:10px;
    padding:10px 12px; border-radius:10px; border:1px solid transparent;
    background: rgba(255,255,255,0.01); color:var(--muted); cursor:pointer; text-align:left;
  }
  .menu button:hover { border-color: rgba(125,200,255,0.08); color:#fff; box-shadow: 0 6px 30px rgba(125,200,255,0.03); }

  /* Header и Footer фиксированные */
  header.app-header, footer.footer {
    position: fixed;
    left: var(--left-width);
    right: 0;top:0;
    height: var(--header-h);
    display:flex; align-items:center; padding:0 18px; box-sizing:border-box;
    background: linear-gradient(90deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));
    border-bottom: 1px solid var(--glass-border);
 /* backdrop-filter: blur(var(--glass-blur)); */
    z-index: 40;
  }
  footer.footer {
    top: auto;
    bottom: 0;
    border-top: 1px solid var(--glass-border);
    height: var(--footer-h);
  }

  header.app-header .title { font-weight:700; color:rgb(var(--accent1)); margin-left:8px; }

  /* Основная область контента */
  .main {
    margin-left: var(--left-width);
    margin-top: var(--header-h);
    margin-bottom: var(--footer-h);
    padding: 20px;
    height: calc(100vh - var(--header-h) - var(--footer-h));
    box-sizing:border-box;
    overflow:auto;
  }

  /* .grid-canvas — фон основной области, где визуальные элементы "плавают" */
  .grid-canvas {
    position:relative;
    width:100%; height:100%;
    border-radius:12px;
    background:
      linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00)),
      repeating-linear-gradient(90deg, rgba(255,255,255,0.01) 0 1px, transparent 1px 40px);
    padding:18px;
    box-sizing:border-box;
    overflow:auto;
    display:flex; flex-direction:column; gap:16px;
  }

  /* Панели метрик */
  .metrics-row { display:flex; gap:12px; flex-wrap:wrap; }
  .panel {
    flex:1 1 300px;
    min-width: 260px;
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius: var(--panel-radius);
    border: 1px solid var(--glass-border);
    padding:12px;
    box-sizing:border-box;
    /*box-shadow: var(--neon);*/
    backdrop-filter: blur(var(--glass-blur));
  }
  .log {position: fixed;flex: unset !important;height: 285px;width: 219px;bottom: 100px;margin: 0;border: 0;margin-left: -20px;background: transparent;backdrop-filter: unset;}
   div#eventLog {height: 250px;width: 250px;position: fixed;}
  .panel h3 { margin:0 0 8px 0; color: rgb(var(--accent2)); font-size:14px; }
  .metric { display:flex; align-items:center; justify-content:space-between; padding:6px 0; border-top:1px dashed rgba(255,255,255,0.02); }
  .metric:first-child{ border-top:0; }

  .big-number { font-size:20px; font-weight:700; color: rgb(var(--accent1)); }

  /* Камеры и источники */
  .sources-row { display:flex; gap:12px; flex-wrap:wrap; }
  .camera {
    flex:1 1 360px; min-width:280px;
    background: linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.01));
    border-radius:12px; padding:10px; border:1px solid var(--glass-border);
  }
  video, img.viewer {
    width:100%; height:220px; object-fit:cover; border-radius:8px; background:#000;
  }

  /* sensor simulation */
  .sensors { display:flex; gap:12px; flex-wrap:wrap; }
  .sensor {
    flex:1 1 200px; min-width:160px;
    padding:10px; border-radius:10px; border:1px solid rgba(255,255,255,0.02);
    background: rgba(255,255,255,0.01);
  }
  .bar {
    height:10px; width:100%; background: rgba(0,0,0,0.2); border-radius:6px; overflow:hidden; margin-top:8px;
  }
  .bar > i { display:block; height:100%; background: linear-gradient(90deg, rgba(var(--accent1),0.8), rgba(var(--accent2),0.8)); width:20%; transition: width 600ms ease; }

  /* footer content alignment */
  .footer { display:flex; align-items:center; gap:10px; padding:0 18px; color:var(--muted); }

  /* small helpers */
  .muted-small { color: rgba(230,246,255,0.6); font-size:12px; }
  .tiny { font-size:11px; color:rgba(230,246,255,0.55); }

.ai-input, input {width: 77%;color: #fff;padding: 8px 36px 8px 10px;border: 1px solid transparent;background: rgba(255, 255, 255, 0.05);border-radius:7px;}
.idePanel {position: fixed;flex: unset !important;height: 285px;width: 219px;bottom: 340px;margin: 0;border: 0;background: transparent;border-radius: 8px;/*background: #101b36c2;*/}
.codeEditior, .terminal { background: #091228;border-radius: 8px;padding: 15px;margin-top: 15px; }
.codeEditior { }
.terminal { }

/* Общий контейнер чата (вставлен под логотип/кнопки) */
.chat-wrap {
  margin-top: 12px;
  border-radius: var(--radius);
  overflow: hidden; /* обрезаем тень/контент при необходимости */
}

/* Панель чата */
.chat-panel {
/* background: var(--panel-bg); */
/* box-shadow: 0 8px 30px rgba(2,6,23,0.6); */
   border-radius: 10px;
   display: flex;
   flex-direction: column;
   height: auto;          /* можно менять под ваши требования */
   min-height: 300px;
   max-height: 320px;
  padding: 0;            /* заголовок/сообщения/инпут управляют отступами */
}

/* Заголовок панели */
.chat-header{
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 14px;
  background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.01));
/*border-bottom: 1px solid rgba(255,255,255,0.03);*/
  text-align: right;
  display: block;
}

/* Заголовок - название и подпись */
.chat-header .title {
  font-weight: 600;
  font-size: 14px;
  color: #e6eef8;
}
.chat-header .sub {
  margin-left: auto;
  color: var(--muted);
  font-size: 12px;
}

/* Область сообщений */
.messages {
  flex: 1;
  overflow: auto;
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 10px;
  /* для плавного автоскролла (опционально) */
  scroll-behavior: smooth;
}

/* Сообщение */
.msg {
  max-width: 100%;
  padding: 10px 12px;
  border-radius: 10px;
  background: var(--glass);
  backdrop-filter: blur(4px);
  line-height: 1.45;
  color: #e6eef8;
  word-break: break-word;
  box-shadow: 0 1px 0 rgba(255,255,255,0.02) inset;
}

/* Сообщение ассистента (слева) */
.msg.assistant {
  align-self: flex-start;
  border-top-left-radius: 6px;
  border-top-right-radius: 10px;
}

/* Сообщение пользователя (справа) */
.msg.user {
  align-self: flex-end;
  background: var(--user-grad);
  color: #fff;
  border-top-right-radius: 6px;
  border-top-left-radius: 10px;
}

/* Область ввода */
.input-wrap {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px;
  border-top: 1px solid rgba(255,255,255,0.03);
  background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));
}

/* Инпут */
.ai-input {
  flex: 1;
  color: #fff;
  padding: 8px 12px;
/*border: 1px solid transparent;*/
  background: rgba(255,255,255,0.04);
  border-radius: 8px;
  font-size: 13px;
  outline: none;
  caret-color: #fff;
}
.ai-input::placeholder { color: rgba(255,255,255,0.45); }

/* Инпут: фокус */
.ai-input:focus {
/* box-shadow: 0 0 0 3px rgba(16,163,127,0.08); */
  border-color: rgba(255,255,255,0.05);
}

/* Кнопки */
/*.btn {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 8px 10px;
  border-radius: 8px;
/*background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));*/
/*border: 1px solid rgba(255,255,255,0.03);
  cursor: pointer;
  color: var(--muted);
  font-size: 14px;
}*/
.btn:active { transform: translateY(1px); }

/* Кнопка отправить — выразительная */

/* Индикатор набора (точки) */
.typing { display: inline-block; height: 10px; }
.dot {
  display: inline-block;
  width: 6px; height: 6px;
  border-radius: 50%;
  background: rgba(255,255,255,0.6);
  margin: 0 2px;
  opacity: 0;
  animation: chat-blink 1.2s infinite;
}
.dot:nth-child(2){ animation-delay: 0.15s; }
.dot:nth-child(3){ animation-delay: 0.3s; }

@keyframes chat-blink {
  0% { opacity: 0; transform: translateY(0); }
  30% { opacity: 1; transform: translateY(-2px); }
  60% { opacity: 0.4; transform: translateY(0); }
  100% { opacity: 0; transform: translateY(0); }
}

/* Адаптация для узкой панели: уменьшаем отступы/шрифты */
@media (max-width: 360px) {
  .chat-header { padding: 10px; gap: 8px; }
  .messages { padding: 8px; gap: 8px; }
  .ai-input { font-size: 12px; padding: 7px 10px; }
  .btn { padding: 6px 8px; font-size: 12px; }
}


  /* responsive tweaks */
  @media (max-width:980px){
    .left{ display:none; }
    .main{ margin-left:0; }
    header, footer{ left:0; }
  }
</style>
</head>
<body>

  <!-- ФИКСИРОВАННОЕ ЛЕВОЕ МЕНЮ -->
  <aside class="left" role="navigation" aria-label="Левое меню">
    <div class="logo">
      <img src="https://blockchainaccreditive.github.io/css/iokwa.svg" alt="logo">
      <div style="display:flex;flex-direction:column;line-height:1;">
        <strong>Octo Dashboard</strong>
    <!--<span class="muted">Holographic Operations</span>-->
      </div>
    </div>

    <nav class="menu" aria-label="Главное меню">
      <button id="btnOverview"><i class="fas fa-th-large"></i> Обзор</button>
      <button id="btnMetrics"><i class="fas fa-chart-line"></i> Метрики</button>
      <button id="btnCams"><i class="fas fa-video"></i> Камеры</button>
      <button id="btnSensors"><i class="fas fa-seedling"></i> Датчики</button>
      <button id="btnStorage"><i class="fas fa-database"></i> Хранилище</button>
      <button id="btnSettings"><i class="fas fa-cog"></i> Настройки</button>
    </nav>


        <!-- AI -->
      <div class="AiPanel">
        <!-- Здесь должен быть диалог с AI (LLM подключенный по API) который всё анализирует -->
      <div class="chat-wrap" style="margin-top:-5px;">
        <div class="chat-panel" role="application" aria-label="Чат в стиле ChatGPT внутри боковой панели">
         <div class="chat-header">
          <!--<div class="sub"></div>-->
           <i class="fa-solid fa-window-minimize"></i>
      <!-- <i class="fa-solid fa-expand"></i> -->
           <i class="fa-regular fa-window-maximize"></i>
           <i class="fa-solid fa-xmark"></i>
          </div>
          <div class="messages" id="messages" tabindex="0">
            <div class="msg assistant" data-role="assistant">
              Демонстрация OctoAI
            </div>
          </div>

          <div class="input-wrap">
            <input id="prompt" class="ai-input" type="text" placeholder="Пишите" aria-label="Пишите, Введите сообщение" />
            <button id="btnSend" class="btn send" title="Отправить"><i class="fa-solid fa-paper-plane"></i></button>
          </div>
        </div>
      </div>
       <!-- Конец AI который всё анализирует -->
      </div> 
       <!-- КОНЕЦ AI -->




     <!-- ПАНЕЛЬ ДЛЯ РАЗРАБОТЧИКОВ -->
      <div class="idePanel">
        <!--IDE -->
         <div class="ide">

     <!-- Здесь должен быть Текстовый Редатктор, чтобы выполнять пользовательские скрипты -->
         <div class="codeEditior">
          <h4>Тут Текстовый Редатктор</h4>
         </div>
     <!-- Конец Текстового Редатктора  -->

     <!-- Здесь должен быть терминал чтобы выполнять пользовательские команды -->
         <div class="terminal">
          <h4>Тут Терминал</h4>
         </div>
    <!-- Конец терминала -->
       </div> 
      <!-- КОНЕЦ IDE -->
      </div>
    <!-- КОНЕЦ ПАНЕЛИ ДЛЯ РАЗРАБОТЧИКОВ -->


      <!-- ЛОГИРОВАНИЕ - ЖУРНАЛ СОБЫТИЙ -->
        <div class="panel log" style="flex:1 1 420px">
          <h3>Логирование</h3>
          <div id="eventLog" style="overflow:auto;font-size:12px;padding-top:6px" aria-live="polite"></div>
        </div>

    <div style="margin-top:auto;cursor:pointer;">
      <div class="muted-small">Версия: 0.1</div>
      <div class="tiny">Состояние: прототип</div>
    </div>
  </aside>

  <!-- HEADER -->
  <header class="app-header" role="banner">
    <div style="display:flex;align-items:center;gap:12px">
      <div style="width:40px;height:40px;border-radius:8px;background:rgba(255,255,255,0.02);display:flex;align-items:center;justify-content:center"> 

<i class="fas fa-atom" style="color:rgb(var(--accent1))"></i> <!-- Здесь должна быть кнопка СКРЫТЬ / ПОКАЗАТЬ левое меню  -->

</div>
      <div class="title">Core</div>
      <div style="margin-left:18px" class="muted">AI / P2P / IPFS / CBDC / Blockchain / Filecoin</div>
    </div>
    <div style="margin-left:auto;display:flex;align-items:center;gap:12px">
      <div class="muted-small"><i class="fas fa-user"></i> <strong id="userAddr"> </strong></div>
      <button id="btnConnectWallet" style="padding:8px 10px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:#cfefff;cursor:pointer"><i class="fas fa-wallet"></i></button>
    </div>
  </header>

  <!-- ОСНОВНОЕ ПРОСТРАНСТВО -->
  <main class="main" role="main">
    <div class="grid-canvas">

      <!-- РЯД МЕТРИК -->
      <section class="metrics-row" aria-label="Метрики">
        <div class="panel" id="filecoinPanel">
          <h3>Filecoin / хранилище</h3>
          <div class="metric"><div class="muted-small">Пул размещения (GiB)</div><div class="big-number" id="filecoinStorage">—</div></div>
          <div class="metric"><div class="muted-small">Ставка хоста (FIL/day)</div><div id="filecoinPrice" class="big-number">—</div></div>
          <div class="metric"><div class="muted-small">Активные контракт-узлы</div><div id="filecoinDeals" class="big-number">—</div></div>
        </div>

        <div class="panel" id="ipfsPanel">
          <h3><i class="fas fa-circle-nodes"></i></h3>
          <div class="metric"><div class="muted-small">Онлайн нод</div><div id="ipfsNodes" class="big-number">—</div></div>
          <div class="metric"><div class="muted-small">Среднее время отклика (ms)</div><div id="ipfsLatency" class="big-number">—</div></div>
          <div class="metric"><div class="muted-small">Pinned CIDs</div><div id="pinnedCount" class="big-number">—</div></div>
        </div>

        <div class="panel" id="serverPanel">
          <h3>Серверные метрики</h3>
          <div class="metric"><div class="muted-small">Активных клиентов</div><div id="activeClients" class="big-number">—</div></div>
          <div class="metric"><div class="muted-small">CPU %</div><div id="cpuUsage" class="big-number">—</div></div>
          <div class="metric"><div class="muted-small">RAM (MB)</div><div id="memUsage" class="big-number">—</div></div>
        </div>


       <div class="panel" style="flex:1 1 220px">
          <h3>Краткая статистика</h3>
          <div class="muted-small">Последнее обновление</div>
          <div id="lastUpdated" style="font-weight:700;margin-top:6px">—</div>
          <div style="height:8px"></div>
          <div class="muted-small">Средняя загрузка сети</div>
          <div id="netLoad" class="big-number">—</div>
        </div>


       <div class="panel">
            <h4 style="margin:0 0 8px 0;color:rgb(var(--accent1))">Доп. источники / симуляции</h4>
            <div class="sensors">
              <div class="sensor">
                <div class="muted-small">Температура (°C)</div>
                <div id="tempVal" style="font-weight:700;font-size:18px">—</div>
                <div class="bar"><i id="tempBar" style="width:10%"></i></div>
              </div>
              <div class="sensor">
                <div class="muted-small">Влажность (%)</div>
                <div id="humVal" style="font-weight:700;font-size:18px">—</div>
                <div class="bar"><i id="humBar" style="width:10%"></i></div>
              </div>
              <div class="sensor">
                <div class="muted-small">Влажность почвы (%)</div>
                <div id="soilVal" style="font-weight:700;font-size:18px">—</div>
                <div class="bar"><i id="soilBar" style="width:10%"></i></div>
              </div>
            </div>
            <div style="margin-top:8px;display:flex;gap:8px">
              <button id="btnSimToggle">Стоп</button>
              <button id="btnExportSim">Экспорт</button>
            </div>
          </div>
      </section>

      <!-- Источники: камеры и др. -->
      <section style="display: flex;gap: 12px;flex-wrap: wrap;">
      <div class="grid-container">
        <div class="grid-item" style="background-color: darkviolet;"><i class="fas fa-camera"></i></div>
        <div class="grid-item"><i class="fas fa-camera"></i></div>
        <div class="grid-item"><i class="fas fa-camera"></i></div>
        <div class="grid-item"><i class="fas fa-camera"></i></div>
        <div class="grid-item"><i class="fas fa-camera"></i></div>
        <div class="grid-item"><i class="fas fa-camera"></i></div>
        <div class="grid-item" style="
    background-color: darkviolet;
"><i class="fas fa-camera"></i></div>
        <div class="grid-item"><i class="fas fa-camera"></i></div>
        <div class="grid-item" style="
    position: relative;
    top: 5px;
    background-color: darkviolet;
"><i class="fas fa-camera"></i></div>
        <div class="grid-item"><i class="fas fa-camera"></i></div>
        <div class="grid-item"><i class="fas fa-camera"></i></div>
        <div class="grid-item" style="
    background-color: orange;
"><i class="fas fa-camera" style="
    /* background-color: orange; */
"></i></div>
        <div class="grid-item"><i class="fas fa-camera"></i></div>
        <div class="grid-item"><i class="fas fa-camera"></i></div>
        <div class="grid-item"><i class="fas fa-camera"></i></div>
        <div class="grid-item"><i class="fas fa-camera"></i></div>
        <div class="grid-item" style="
    background-color: orange;
"><i class="fas fa-camera"></i></div>
        <div class="grid-item"><i class="fas fa-camera"></i></div>
        <div class="grid-item"><i class="fas fa-camera"></i></div>
        <div class="grid-item"><i class="fas fa-camera"></i></div>
        <div class="grid-item"><i class="fas fa-camera"></i></div>
        <div class="grid-item"><i class="fas fa-camera"></i></div>
        <div class="grid-item" style="
    background-color: #00a623;
"><i class="fas fa-camera"></i></div>
        <div class="grid-item"><i class="fas fa-camera"></i></div>
        <div class="grid-item"><i class="fas fa-camera"></i></div>
        <div class="grid-item"><i class="fas fa-camera"></i></div>
        <div class="grid-item" style="
    background-color: #501a06;
"><i class="fas fa-camera"></i></div>
        <div class="grid-item" style="
    background-color: orange;
"><i class="fas fa-camera"></i></div>
        <div class="grid-item"><i class="fas fa-camera"></i></div>
        <div class="grid-item"><i class="fas fa-camera"></i></div>
        <div class="grid-item"><i class="fas fa-camera"></i></div>
        <div class="grid-item"><i class="fas fa-camera"></i></div>
        <div class="grid-item"><i class="fas fa-camera"></i></div>
        <div class="grid-item" style="
    background-color: orange;
"><i class="fas fa-camera"></i></div>
        <div class="grid-item"><i class="fas fa-camera"></i></div>
        <div class="grid-item"><i class="fas fa-camera"></i></div>
    </div>
      </section>




    </div>
  </main>

<footer class="footer" role="contentinfo">
    <style>
       
        
        .content {
            flex: 1;
            padding: 2rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        

        
        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            width: 100%;
            max-width: 1200px;
        }
        
        .metric {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 1.5rem;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease;
        }
        
        .metric:hover {
            transform: translateY(-5px);
        }
        
        .metric h2 {
            font-size: 1.2rem;
            margin-bottom: 1rem;
            color: #a9a9b2;
        }
        
        .big-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: #4cc9f0;
            text-shadow: 0 0 10px rgba(76, 201, 240, 0.5);
        }
        
        .footer {
        }
        
        #status {
            display: flex;
            align-items: center;
            font-weight: 600;
            color: #f5f5f5;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            background: rgba(76, 201, 240, 0.1);
            margin-right: 1rem;
        }
        
        #statusText {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }
        
        .status-item {
            display: flex;
            align-items: center;
            padding: 0.5rem;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.05);
            transition: background 0.3s ease;
        }
        
        .status-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        /* Анимации для иконок */
        .fa-network-wired {
            color: #4cc9f0;
            animation: pulse 1.5s infinite alternate;
        }
        
        .fa-server {
            color: #f72585;
            animation: blink 0.8s infinite alternate;
        }
        
        .fa-microchip {
            color: #fca311;
            animation: glow 1.2s infinite alternate;
        }
        
        .fa-memory {
            color: #7209b7;
            animation: pulse 1s infinite alternate;
        }
        
        .fa-hard-drive {
            color: #38b000;
            animation: spin 4s infinite linear;
        }
        
        .fa-sd-card {
            color: #90e0ef;
            animation: blink 0.5s infinite alternate;
        }
        
        .fa-database {
            color: #ff9e00;
            animation: pulse 1.3s infinite alternate;
        }
        
        .fa-circle-nodes {
            color: #e63946;
            animation: pulse 0.7s infinite alternate;
        }
        
        .fa-link {
            color: #a8dadc;
            animation: blink 1.5s infinite alternate;
        }
        
        .fa-envelopes-bulk {
            color: #ffb4a2;
            animation: float 2s infinite alternate;
        }
        
        /* Определение анимаций */
        @keyframes pulse {
            from { opacity: 0.6; transform: scale(1); }
            to { opacity: 1; transform: scale(1.1); }
        }
        
        @keyframes blink {
            from { opacity: 0.3; }
            to { opacity: 1; }
        }
        
        @keyframes glow {
            from { text-shadow: 0 0 5px currentColor; }
            to { text-shadow: 0 0 15px currentColor; }
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        @keyframes float {
            from { transform: translateY(0); }
            to { transform: translateY(-3px); }
        }
        
        /* Адаптивность */
        @media (max-width: 768px) {
            .footer {
                flex-direction: column;
                gap: 1rem;
            }
            
            #status {
                margin-right: 0;
                margin-bottom: 0.5rem;
            }
            
            #statusText {
                justify-content: center;
            }
        }
    </style>


    <div class="content">
        <h1 style="
    font-size: 45px;
    position: relative;
    top: 30px;
    left: -280px;
    letter-spacing: 30px;
    color: #ffffff0a;
">СИСТЕМНЫЙ МОНИТОР</h1>
        <div class="dashboard">
            <div class="metric">
                <h2>Использование памяти</h2>
                <div id="memUsage" class="big-number">64%</div>
            </div>
            <div class="metric">
                <h2>Сетевая нагрузка</h2>
                <div id="netLoad" class="big-number">3.2 Gb/s</div>
            </div>
            <div class="metric">
                <h2>Сделки Filecoin</h2>
                <div id="filecoinDeals" class="big-number">128</div>
            </div>
            <div class="metric">
                <h2>IPFS узлы</h2>
                <div id="ipfsNodes" class="big-number">42</div>
            </div>
        </div>
    </div>
    
    <footer class="footer" role="contentinfo">
        <div id="status" style="letter-spacing: 5px;cursor: pointer;">
            NETWORK USAGE&nbsp;<i class="fas fa-network-wired"></i>
            <span id="netLoadValue" style="margin-left: 5px;">3.2 Gb/s</span>
        </div>
        <div style="margin-left:auto;letter-spacing: 5px;cursor: pointer;" id="statusText">
            <span class="status-item">GPU <i class="fas fa-server"></i></span>
            <span class="status-item">CPU <i class="fas fa-microchip"></i></span>
            <span class="status-item">RAM <i class="fas fa-memory"></i></span>
            <span class="status-item">HDD <i class="fa-solid fa-compact-disc"></i>

<i class="fas fa-compact-disk"></i></span>
            <span class="status-item">SSD <i class="fas fa-sd-card"></i></span>
            <span class="status-item">DISK <i class="fas fa-database"></i></span>
            <span class="status-item">NODES <i class="fas fa-circle-nodes"></i></span>
            <span class="status-item">LINKS <i class="fas fa-link"></i></span>
            <span class="status-item">PACKETS <i class="fas fa-envelopes-bulk"></i></span>
        </div>
    </footer>

    <script>
        // Функция для обновления значений (имитация реальных данных)
        function updateMetrics() {
            // Обновление использования памяти
            const memUsage = 50 + Math.floor(Math.random() * 30);
            document.getElementById('memUsage').textContent = `${memUsage}%`;
            
            // Обновление сетевой нагрузки
            const netLoad = (Math.random() * 5).toFixed(1);
            document.getElementById('netLoad').textContent = `${netLoad} Gb/s`;
            document.getElementById('netLoadValue').textContent = `${netLoad} Gb/s`;
            
            // Обновление сделок Filecoin
            const filecoinDeals = 100 + Math.floor(Math.random() * 50);
            document.getElementById('filecoinDeals').textContent = filecoinDeals;
            
            // Обновление IPFS узлов
            const ipfsNodes = 30 + Math.floor(Math.random() * 25);
            document.getElementById('ipfsNodes').textContent = ipfsNodes;
        }
        
        // Обновляем значения каждые 3 секунды
        setInterval(updateMetrics, 3000);
        
        // Инициализация при загрузке
        updateMetrics();
    </script>
  </footer>




  <script>
    // Grab elements (these IDs MUST exist)
    let messagesEl = document.getElementById('messages');
    let input = document.getElementById('prompt');
    let btn = document.getElementById('btnSend');

    // Fallback: if any piece is missing, auto-create a minimal chat to avoid runtime errors
    (function ensureChatIds(){
      if(messagesEl && input && btn) return; // all good
      console.warn('[chat] Some required nodes missing — creating fallback nodes');
      const sidebar = document.querySelector('.sidebar');
      const wrap = document.createElement('div'); wrap.className='chat-wrap';
      const panel = document.createElement('div'); panel.className='chat-panel';
      const msgs = document.createElement('div'); msgs.className='messages'; msgs.id='messages';
      const inputWrap = document.createElement('div'); inputWrap.className='input-wrap';
      const inp = document.createElement('input'); inp.id='prompt'; inp.className='ai-input'; inp.placeholder='Напишите сообщение...';
      const b = document.createElement('button'); b.id='btnSend'; b.className='btn send'; b.textContent='Отправить';
      inputWrap.appendChild(inp); inputWrap.appendChild(b);
      panel.appendChild(msgs); panel.appendChild(inputWrap); wrap.appendChild(panel);
      (sidebar||document.body).appendChild(wrap);
      messagesEl = document.getElementById('messages');
      input = document.getElementById('prompt');
      btn = document.getElementById('btnSend');
    })();

    function addMessage(role, text, options={}){
      const wrap = document.createElement('div');
      wrap.className = 'msg ' + (role==='user' ? 'user' : 'assistant');
      if(options.meta){
        const meta = document.createElement('div'); meta.className='meta'; meta.textContent = options.meta;
        wrap.appendChild(meta);
      }
      const body = document.createElement('div');
      if (options.isHTML) body.innerHTML = text; else body.textContent = text;
      wrap.appendChild(body);
      messagesEl.appendChild(wrap);
      messagesEl.scrollTop = messagesEl.scrollHeight;
      return wrap;
    }

    function simulateAssistantReply(userText){
      const typingWrap = document.createElement('div');
      typingWrap.className = 'msg assistant';
      const dots = document.createElement('div'); dots.className='typing'; dots.innerHTML='<span class="dot"></span><span class="dot"></span><span class="dot"></span>';
      typingWrap.appendChild(dots);
      messagesEl.appendChild(typingWrap);
      messagesEl.scrollTop = messagesEl.scrollHeight;

      setTimeout(()=>{
        typingWrap.remove();
        const reply = 'Ответ от OctoAI: «' + userText + '»';
        addMessage('assistant', reply);
      }, 700 + Math.min(userText.length*18, 1100));
    }

    function send(){
      const v = input.value.trim();
      if(!v) return;
      addMessage('user', v);
      input.value='';
      simulateAssistantReply(v);
      input.focus();
    }

    // Wire events (guarded)
    if(btn) btn.addEventListener('click', send);
    if(input) input.addEventListener('keydown', (e)=>{
      if(e.key === 'Enter' && !e.shiftKey){ e.preventDefault(); send(); }
    });

    // ---------------- TESTS ----------------
    (function runTests(){
      const out = document.getElementById('test-results');
      const results = [];
      function pass(name){results.push({name, ok:true});}
      function fail(name, err){results.push({name, ok:false, err});}

      // Test 1: required nodes exist
      try{
        if(messagesEl && input && btn) pass('DOM: элементы #messages, #prompt, #btnSend существуют');
        else throw new Error('Не найдены один или несколько обязательных элементов');
      }catch(e){ fail('DOM: обязательные элементы присутствуют', e.message); }

      // Test 2: отправка по кнопке
      try{
        const before = messagesEl.querySelectorAll('.msg').length;
        input.value = 'тест-кнопка';
        btn.click();
        const after = messagesEl.querySelectorAll('.msg.user').length;
        if(after>0 && messagesEl.querySelectorAll('.msg').length>=before+1) pass('Логика: добавляется сообщение пользователя по клику кнопки');
        else throw new Error('Сообщение пользователя не добавлено по клику');
      }catch(e){ fail('Логика: отправка по кнопке', e.message); }

      // Test 3: отправка по Enter
      try{
        const before = messagesEl.querySelectorAll('.msg').length;
        input.value = 'тест-enter';
        const ev = new KeyboardEvent('keydown', {key:'Enter', bubbles:true});
        input.dispatchEvent(ev);
        const after = messagesEl.querySelectorAll('.msg.user').length;
        if(after>0 && messagesEl.querySelectorAll('.msg').length>=before+1) pass('Логика: добавляется сообщение по Enter');
        else throw new Error('Сообщение по Enter не добавлено');
      }catch(e){ fail('Логика: отправка по Enter', e.message); }

      // --- Additional tests (do not modify existing ones) ---
      // Test 4: Shift+Enter НЕ отправляет
      try{
        const beforeUsers = messagesEl.querySelectorAll('.msg.user').length;
        input.value = 'shift-enter';
        const ev2 = new KeyboardEvent('keydown', {key:'Enter', bubbles:true, shiftKey:true});
        input.dispatchEvent(ev2);
        const afterUsers = messagesEl.querySelectorAll('.msg.user').length;
        if(afterUsers === beforeUsers) pass('Горячие клавиши: Shift+Enter не отправляет сообщение');
        else throw new Error('Shift+Enter отправил сообщение, а не должен');
      }catch(e){ fail('Горячие клавиши: Shift+Enter', e.message); }

      // Test 5: Пустой ввод не отправляется по клику
      try{
        const beforeUsers = messagesEl.querySelectorAll('.msg.user').length;
        input.value = '   ';
        btn.click();
        const afterUsers = messagesEl.querySelectorAll('.msg.user').length;
        if(afterUsers === beforeUsers) pass('Валидатор: пустые сообщения не отправляются');
        else throw new Error('Пустое сообщение было отправлено');
      }catch(e){ fail('Валидатор: пустые сообщения', e.message); }

      // Test 6: Поле ввода получает фокус после отправки
      try{
        input.value = 'focus-test';
        btn.click();
        if(document.activeElement === input) pass('UX: инпут получает фокус после отправки');
        else throw new Error('Фокус не возвращён в поле ввода');
      }catch(e){ fail('UX: фокус после отправки', e.message); }

      // Test 7: Автоскролл вниз после большого сообщения
      try{
        const long = Array(50).fill('Очень длинное сообщение').join(' ');
        addMessage('assistant', long);
        const nearBottom = Math.abs((messagesEl.scrollTop + messagesEl.clientHeight) - messagesEl.scrollHeight) <= 2;
        if(nearBottom) pass('Скролл: автопрокрутка к последнему сообщению работает');
        else throw new Error('Автопрокрутка не сработала');
      }catch(e){ fail('Скролл: автопрокрутка', e.message); }

      // Render initial results (sync tests)
      if(out){
        out.innerHTML = '<div class="test"><span class="badge">SELF‑TEST</span> Автотесты чата:</div>' +
          results.map(r=>`<div class="test"><span class="badge ${r.ok? 'ok':'bad'}">${r.ok? 'PASS':'FAIL'}</span> ${r.name}${r.ok? '' : ' — '+r.err}</div>`).join('');
      } else {
        console.table(results);
      }

      // Test 8 (async): индикатор набора исчезает
      (function asyncTypingTest(){
        const before = !!messagesEl.querySelector('.typing');
        simulateAssistantReply('async-typing');
        setTimeout(()=>{
          const exists = !!messagesEl.querySelector('.typing');
          const ok = before === false && exists === false; // не было до, появится кратко, затем исчезнет
          const line = `<div class="test"><span class="badge ${ok? 'ok':'bad'}">${ok? 'PASS':'FAIL'}</span> Асинхронно: индикатор набора исчезает после ответа</div>`;
          if(out){ out.insertAdjacentHTML('beforeend', line); }
          else { console.log('Async Test 8:', ok? 'PASS' : 'FAIL'); }
        }, 1500);
      })();
    })();
  </script>







<script>
/*
  Скрипт отвечает за:
  - симуляцию метрик Filecoin / IPFS / Server
  - управление веб-камерой (getUserMedia)
  - загрузку IP-камеры (через <img>, может быть CORS)
  - симуляцию сенсоров и экспорт данных
  - простые UI-обновления и лог
*/

/* ----------------- УТИЛИТЫ ----------------- */
function nowTime() { return new Date().toLocaleTimeString(); }
function logEvent(msg) {
  const el = document.getElementById('eventLog');
  const line = document.createElement('div');
  line.textContent = `[${nowTime()}] ${msg}`;
  el.prepend(line);
  // ограничим длину лога
  while (el.children.length > 200) el.removeChild(el.lastChild);
}

/* ----------------- МЕТРИКИ (симуляция) ----------------- */
let metricsInterval = null;
let simRunning = true;
const metricsState = {
  filecoinStorage: 12000, // GiB
  filecoinPrice: 0.012,   // FIL/day
  filecoinDeals: 42,
  ipfsNodes: 8,
  ipfsLatency: 120,
  pinnedCount: 540,
  activeClients: 3,
  cpuUsage: 12,
  memUsage: 1024,
  totalEvents: 0,
  netLoad: 12
};

function updateMetricsUI() {
  // Обновляем DOM интерактивно
  document.getElementById('filecoinStorage').textContent = Math.round(metricsState.filecoinStorage) + ' GiB';
  document.getElementById('filecoinPrice').textContent = metricsState.filecoinPrice.toFixed(4) + ' FIL';
  document.getElementById('filecoinDeals').textContent = metricsState.filecoinDeals;

  document.getElementById('ipfsNodes').textContent = metricsState.ipfsNodes;
  document.getElementById('ipfsLatency').textContent = metricsState.ipfsLatency + ' ms';
  document.getElementById('pinnedCount').textContent = metricsState.pinnedCount;

  document.getElementById('activeClients').textContent = metricsState.activeClients;
  document.getElementById('cpuUsage').textContent = metricsState.cpuUsage + ' %';
  document.getElementById('memUsage').textContent = Math.round(metricsState.memUsage) + ' MB';

  document.getElementById('lastUpdated').textContent = nowTime();
  document.getElementById('netLoad').textContent = metricsState.netLoad + ' %';
}

function simulateMetricsTick() {
  // Лёгкие случайные флуктуации (реалистично не выглядет как production)
  metricsState.filecoinStorage += (Math.random()-0.3) * 10;
  metricsState.filecoinPrice += (Math.random()-0.5) * 0.0002;
  metricsState.filecoinDeals += (Math.random() < 0.05 ? 1 : 0);
  metricsState.ipfsNodes = Math.max(1, Math.round(8 + Math.sin(Date.now()/60000)*2 + (Math.random()-0.5)*2));
  metricsState.ipfsLatency = Math.max(20, Math.round(100 + (Math.random()-0.5)*40));
  metricsState.pinnedCount += Math.round((Math.random()-0.4)*2);
  metricsState.activeClients = Math.max(0, Math.round(3 + (Math.random()-0.4)*2));
  metricsState.cpuUsage = Math.max(1, Math.round(10 + Math.random()*30));
  metricsState.memUsage = Math.max(256, Math.round(900 + Math.random()*400));
  metricsState.netLoad = Math.max(1, Math.round(5 + Math.random()*40));

  updateMetricsUI();
  logEvent('Metrics tick — обновлены показатели');
}

/* Запуск/остановка симуляции метрик */
function startMetrics() {
  if(metricsInterval) clearInterval(metricsInterval);
  metricsInterval = setInterval(simulateMetricsTick, 2000);
  simulateMetricsTick();
}
startMetrics();

/* ----------------- ВЕБ-КАМЕРА ----------------- */
let webcamStream = null;
const videoEl = document.getElementById('webcam');
const camStatus = document.getElementById('camStatus');

document.getElementById('btnStartCam').addEventListener('click', async () => {
  try {
    // Запрос разрешения у пользователя (браузер покажет запрос)
    webcamStream = await navigator.mediaDevices.getUserMedia({ video: { width:1280, height:720 }, audio:false });
    videoEl.srcObject = webcamStream;
    camStatus.textContent = 'Статус: подключено';
    logEvent('Веб-камера включена');
  } catch (e) {
    camStatus.textContent = 'Ошибка доступа к камере';
    logEvent('Ошибка веб-камеры: ' + (e && e.message));
  }
});
document.getElementById('btnStopCam').addEventListener('click', () => {
  if(webcamStream) {
    webcamStream.getTracks().forEach(t=>t.stop());
    videoEl.srcObject = null;
    webcamStream = null;
    camStatus.textContent = 'Статус: остановлено';
    logEvent('Веб-камера остановлена');
  }
});

/* ----------------- IP-КАМЕРА (простая загрузка снимка) ----------------- */
/* const ipViewer = document.getElementById('ipViewer');
const ipStatus = document.getElementById('ipStatus');
document.getElementById('btnLoadIP').addEventListener('click', () => {
  const url = document.getElementById('ipUrl').value.trim();
  if(!url){ ipStatus.textContent = 'Введите URL камеры'; return; }
  // Просто подставляем URL в <img> — учтите CORS и типы потоков (MJPEG / snapshot)
  ipViewer.src = url;
  ipStatus.textContent = 'Загрузка...';
  ipViewer.onload = () => { ipStatus.textContent = 'Поток загружен'; logEvent('IP-камера: загружен источник ' + url); };
  ipViewer.onerror = (e) => { ipStatus.textContent = 'Не удалось загрузить (CORS/URL)'; logEvent('IP-камера: ошибка загрузки ' + url); };
});
document.getElementById('btnClearIP').addEventListener('click', () => {
  ipViewer.src = '';
  document.getElementById('ipUrl').value = '';
  ipStatus.textContent = 'Статус: — ';
  logEvent('IP-камера очищена');
}); */

/* ----------------- СИМУЛЯЦИЯ ДАТЧИКОВ (агро) ----------------- */
let sensorTimer = null;
const sensorsHistory = [];

function simulateSensors() {
  const temp = +(18 + Math.sin(Date.now()/60000)*2 + (Math.random()-0.5)*2).toFixed(1);
  const hum = +(45 + (Math.random()-0.5)*12).toFixed(0);
  const soil = +(30 + (Math.random()-0.5)*20).toFixed(0);

  document.getElementById('tempVal').textContent = temp + ' °C';
  document.getElementById('humVal').textContent = hum + ' %';
  document.getElementById('soilVal').textContent = soil + ' %';

  document.getElementById('tempBar').style.width = Math.min(100, 50 + (temp-18)*3) + '%';
  document.getElementById('humBar').style.width = Math.min(100, hum) + '%';
  document.getElementById('soilBar').style.width = Math.min(100, soil) + '%';

  sensorsHistory.push({ ts: Date.now(), temp, hum, soil });
  if(sensorsHistory.length > 600) sensorsHistory.shift();
  // логируем каждую 5-ю запись
  if(sensorsHistory.length % 5 === 0) logEvent('Sensors: обновлены показания');
}

function startSensors() {
  if(sensorTimer) clearInterval(sensorTimer);
  sensorTimer = setInterval(simulateSensors, 1000);
  simulateSensors();
}
startSensors();

document.getElementById('btnSimToggle').addEventListener('click', (e) => {
  simRunning = !simRunning;
  if(simRunning) { startSensors(); e.target.textContent = 'Остановить симуляцию'; logEvent('Симуляция датчиков запущена'); }
  else { clearInterval(sensorTimer); sensorTimer = null; e.target.textContent = 'Запустить симуляцию'; logEvent('Симуляция датчиков остановлена'); }
});

document.getElementById('btnExportSim').addEventListener('click', () => {
  const payload = JSON.stringify(sensorsHistory.slice(-200), null, 2);
  const blob = new Blob([payload], {type:'application/json'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url; a.download = 'sensors_history.json'; a.click();
  URL.revokeObjectURL(url);
  logEvent('Экспорт симуляции: сохранён JSON');
});

/* ----------------- ПРОСТОЙ MOCK: Подключение "кошелька" (имитация) --------------- */
/* Примечание: здесь не реализован MetaMask внутри Tauri. Для прототипа мы эмулируем адрес
   или можно интегрировать WalletConnect/ethers.js в полноценный продукт. */
document.getElementById('btnConnectWallet').addEventListener('click', () => {
  // Для прототипа — генерируем фиктивный адрес (не приватный ключ)
  const fake = '0x' + Math.random().toString(16).slice(2,10).padEnd(40,'0');
  document.getElementById('userAddr').textContent = fake.slice(0,8) + '…' + fake.slice(-6);
  logEvent('Кошелек подключен (эмуляция): ' + fake);
});

/* ----------------- METRICS LOGIC: возможность вручную увеличить события ------------- */
/* let manualEventId = 0;
document.getElementById('ipViewer').addEventListener('click', () => {
  // демонстрация генерации события — пользователь кликнул IP-поток
  manualEventId++;
  logEvent('User clicked IP viewer — генерируем событие #' + manualEventId);
  metricsState.totalEvents += 1;
}); */

/* ----------------- Обновление UI каждые N секунд (логика метрик интегрирована выше) ------------ */
setInterval(() => {
  document.getElementById('activeClients').textContent = metricsState.activeClients;
  document.getElementById('cpuUsage').textContent = metricsState.cpuUsage + ' %';
  document.getElementById('memUsage').textContent = Math.round(metricsState.memUsage) + ' MB';
  document.getElementById('lastUpdated').textContent = nowTime();
}, 3000);

/* Инициализация UI */
updateMetricsUI();
logEvent('Панель загружена — готово к работе');
</script>

</body>
</html>
